<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sawari - The Future of Digital India</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
        integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin="" />
    <style>
        body {
            background-color: #f9fafb;
            font-family: 'Inter', sans-serif;
            margin: 0;
            color: #1f2937;
        }
        .container {
            max-width: 80rem;
            margin-left: auto;
            margin-right: auto;
            padding-left: 1rem;
            padding-right: 1rem;
        }
        .navbar {
            background-color: white;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            z-index: 1000;
        }

        .navbar-container {
            display: flex;
            align-items: center;
            justify-content: space-between;
            height: 7rem;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            text-decoration: none;
            color: inherit;
        }

        .logo img {
            height: 13rem;
            width: auto;
        }

        .logo-text {
            font-size: 1.25rem;
            font-weight: bold;
            color: #1f2937;
        }

        .nav-links {
            display: none;
            /* Hidden by default on mobile */
            align-items: baseline;
            gap: 1rem;
        }

        .nav-link {
            color: #4b5563;
            text-decoration: none;
            padding: 0.5rem 0.75rem;
            border-radius: 0.375rem;
            font-size: 1.3rem;
            font-weight: 700;
            transition: color 0.3s;
        }

        .nav-link:hover {
            color: #3b82f6;
        }

        .cta-button-nav {
            background: linear-gradient(to right, #3b82f6, #9333ea);
            color: white;
            padding: 0.5rem 1rem;
            border-radius: 9999px;
            font-size: 1.3rem;
            font-weight: 600;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -2px rgba(0, 0, 0, 0.1);
            text-decoration: none;
            transition: all 0.3s;
        }

        .cta-button-nav:hover {
            background: linear-gradient(to right, #2563eb, #7e22ce);
        }

        .mobile-menu-button {
            background-color: white;
            border: none;
            padding: 0.5rem;
            border-radius: 0.375rem;
            color: #9ca3af;
            cursor: pointer;
        }

        .mobile-menu-button svg {
            height: 1.5rem;
            width: 1.5rem;
        }

        .mobile-menu {
            display: none;
            padding: 0.5rem 0.75rem 0.75rem;
            border-top: 1px solid #e5e7eb;
        }

        .mobile-menu.active {
            display: block;
        }

        .mobile-menu .nav-link {
            display: block;
            padding: 0.5rem;
        }

        .mobile-menu .cta-button-nav {
            display: block;
            text-align: center;
            margin-top: 0.5rem;
        }

        /* Hero Section */
        .hero-section {
            position: relative;
            padding-top: 4rem;
            /* For navbar height */
            height: 75vh;
            min-height: 500px;
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
            color: white;
            overflow: hidden;
        }

        .hero-background {
            background-image: url('https://images.unsplash.com/photo-1544620347-c4fd4a3d5957?q=80&w=1920&auto=format&fit=crop');
            background-size: cover;
            background-position: center;
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            z-index: -2;
        }

        .hero-overlay {
            background-color: rgba(0, 0, 0, 0.5);
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            z-index: -1;
        }

        .hero-content {
            position: relative;
            max-width: 56rem;
        }

        .hero-content h1 {
            font-size: 2.5rem;
            font-weight: 800;
            line-height: 1.2;
            margin: 0;
        }

        .hero-content p {
            margin-top: 1.5rem;
            font-size: 1.125rem;
            color: #e5e7eb;
        }

        .hero-button {
            margin-top: 2rem;
            display: inline-block;
            background-color: #3b82f6;
            color: white;
            font-weight: bold;
            padding: 0.75rem 2rem;
            border-radius: 9999px;
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -4px rgba(0, 0, 0, 0.1);
            text-decoration: none;
            transition: all 0.3s;
            transform: scale(1);
        }

        .hero-button:hover {
            background-color: #2563eb;
            transform: scale(1.05);
        }

        /* General Section Styles */
        .section {
            padding: 4rem 0;
        }

        .bg-white {
            background-color: white;
        }

        .bg-gray-100 {
            background-color: #f3f4f6;
        }

        h2 {
            font-size: 2.25rem;
            font-weight: bold;
            color: #1f2937;
            letter-spacing: -0.025em;
            margin: 0 0 1rem;
        }

        .section-description {
            margin-top: 1.5rem;
            font-size: 1.125rem;
            color: #4b5563;
        }

        .centered {
            max-width: 42rem;
            margin-left: auto;
            margin-right: auto;
        }

        /* Grids */
        .grid-2-col {
            display: grid;
            gap: 3rem;
        }

        .grid-3-col {
            margin-top: 3rem;
            display: grid;
            gap: 2rem;
        }

        /* Map Container */
        .map-container {
            position: relative;
            z-index: 0;
            border-radius: 1rem;
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 8px 10px -6px rgba(0, 0, 0, 0.1);
            overflow: hidden;
            height: 600px;
            border: 4px solid #e5e7eb;
        }

        #map {
            height: 100%;
            width: 100%;
        }

        /* Features Section */
        .feature-card {
            background-color: white;
            padding: 1.5rem;
            border-radius: 0.75rem;
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -4px rgba(0, 0, 0, 0.1);
            transition: all 0.3s;
            cursor: pointer;
            text-align: center;
        }

        .feature-card:hover {
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 8px 10px -6px rgba(0, 0, 0, 0.1);
            transform: translateY(-0.5rem);
        }

        .feature-icon-wrapper {
            height: 3rem;
            width: 3rem;
            border-radius: 9999px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto;
        }

        .feature-icon-wrapper svg {
            height: 1.5rem;
            width: 1.5rem;
        }

        .feature-card h3 {
            margin-top: 1.25rem;
            font-size: 1.25rem;
            font-weight: 600;
            color: #1f2937;
            margin-bottom: 0.5rem;
        }

        .feature-card p {
            color: #4b5563;
            margin: 0;
        }

        .bg-blue-100 {
            background-color: #dbeafe;
        }

        .text-blue-600 {
            color: #2563eb;
        }

        .bg-green-100 {
            background-color: #d1fae5;
        }

        .text-green-600 {
            color: #059669;
        }

        .bg-red-100 {
            background-color: #fee2e2;
        }

        .text-red-600 {
            color: #dc2626;
        }

        .bg-purple-100 {
            background-color: #f3e8ff;
        }

        .text-purple-600 {
            color: #9333ea;
        }

        .bg-gray-200 {
            background-color: #e5e7eb;
        }

        .text-gray-800 {
            color: #1f2937;
        }

        .trip-plan-container {
            white-space: pre-line;
            /* Respects newlines for cleaner formatting */
            font-family: inherit;
            /* Inherits the simpler 'Inter' font from the body */
            line-height: 1.6;
            /* Improves readability */
            background-color: #fdfdff;
            border: 1px solid #e5e7eb;
            border-radius: 0.5rem;
            padding: 1rem;
        }


        /* CTA Section */
        .cta-button-main {
            margin-top: 2rem;
            display: inline-block;
            background: linear-gradient(to right, #3b82f6, #9333ea);
            color: white;
            font-weight: bold;
            padding: 0.75rem 2rem;
            border-radius: 9999px;
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -4px rgba(0, 0, 0, 0.1);
            text-decoration: none;
            transition: all 0.3s;
            transform: scale(1);
            border: none;
            cursor: pointer;
        }

        .cta-button-main:hover {
            background: linear-gradient(to right, #2563eb, #7e22ce);
            transform: scale(1.05);
        }

        .cta-button-main:disabled {
            background: #9ca3af;
            cursor: not-allowed;
            transform: scale(1);
        }

        .google-login-btn {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.75rem;
            width: 100%;
            padding: 0.625rem 1rem;
            border-radius: 9999px;
            border: 1px solid #d1d5db;
            background-color: white;
            font-size: 1rem;
            font-weight: 500;
            color: #374151;
            cursor: pointer;
            transition: all 0.2s;
        }

        .google-login-btn:hover {
            background-color: #f9fafb;
            border-color: #9ca3af;
        }

        .google-login-btn svg {
            width: 1.25rem;
            height: 1.25rem;
        }

        .divider {
            display: flex;
            align-items: center;
            text-align: center;
            color: #9ca3af;
            font-size: 0.875rem;
            margin: 1.5rem 0;
        }

        .divider::before,
        .divider::after {
            content: '';
            flex: 1;
            border-bottom: 1px solid #e5e7eb;
        }

        .divider:not(:empty)::before {
            margin-right: .5em;
        }

        .divider:not(:empty)::after {
            margin-left: .5em;
        }


        /* Styles for the login form inputs */
        .form-input {
            width: 100%;
            padding: 0.75rem 1rem;
            border-radius: 0.375rem;
            border: 1px solid #d1d5db;
            box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
            box-sizing: border-box;
        }

        .form-input:focus {
            outline: 2px solid transparent;
            outline-offset: 2px;
            border-color: #3b82f6;
            box-shadow: 0 0 0 2px #3b82f6;
        }


        /* Contact Form */
        .form-container {
            margin-top: 3rem;
            max-width: 42rem;
            margin-left: auto;
            margin-right: auto;
        }

        .contact-form {
            background-color: white;
            padding: 2rem;
            border-radius: 1rem;
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 8px 10px -6px rgba(0, 0, 0, 0.1);
            display: grid;
            gap: 1.5rem;
        }

        .contact-form label {
            display: block;
            font-size: 0.875rem;
            font-weight: 500;
            color: #374151;
            margin-bottom: 0.25rem;
        }

        .contact-form input,
        .contact-form textarea {
            width: 100%;
            padding: 0.75rem 1rem;
            border-radius: 0.375rem;
            border: 1px solid #d1d5db;
            box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
            box-sizing: border-box;
            /* Important for width */
        }

        .contact-form input:focus,
        .contact-form textarea:focus {
            outline: 2px solid transparent;
            outline-offset: 2px;
            border-color: #3b82f6;
            box-shadow: 0 0 0 2px #3b82f6;
        }

        .contact-form button {
            width: 100%;
            background: linear-gradient(to right, #3b82f6, #9333ea);
            color: white;
            font-weight: bold;
            padding: 0.75rem 1.5rem;
            border: none;
            border-radius: 9999px;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -2px rgba(0, 0, 0, 0.1);
            cursor: pointer;
            transition: all 0.3s;
        }

        .contact-form button:hover {
            background: linear-gradient(to right, #2563eb, #7e22ce);
        }

        .hidden {
            display: none !important;
        }

        /* Footer */
        .footer {
            background-color: #1f2937;
            color: #9ca3af;
            padding-top: 4rem;
            padding-bottom: 2rem;
        }

        .footer-grid {
            display: grid;
            grid-template-columns: repeat(1, 1fr);
            gap: 2.5rem;
            padding-bottom: 3rem;
            border-bottom: 1px solid #374151;
            margin-bottom: 2rem;
        }

        .footer-column .logo {
            margin-bottom: 1rem;
            display: inline-flex;
        }

        .footer-column .logo-text {
            color: white;
        }

        .footer-about {
            line-height: 1.6;
            max-width: 22rem;
        }

        .footer-column h4 {
            color: white;
            font-size: 1rem;
            font-weight: 600;
            margin-top: 0;
            margin-bottom: 1rem;
        }

        .footer-column ul {
            list-style: none;
            padding: 0;
            margin: 0;
        }

        .footer-column ul li {
            margin-bottom: 0.75rem;
        }

        .footer-column ul a {
            color: #9ca3af;
            text-decoration: none;
            transition: color 0.3s;
        }

        .footer-column ul a:hover {
            color: white;
        }

        .social-links {
            display: flex;
            gap: 1.25rem;
            align-items: center;
        }

        .social-links a {
            color: #9ca3af;
            transition: color 0.3s;
        }

        .social-links a:hover {
            color: white;
        }

        .social-links svg {
            width: 1.5rem;
            height: 1.5rem;
        }

        .footer-bottom {
            text-align: center;
        }

        /* Modal Styles */
        .modal-overlay {
            position: fixed;
            inset: 0;
            z-index: 2000;
            display: flex;
            align-items: center;
            justify-content: center;
            background-color: rgba(0, 0, 0, 0.75);
        }

        .modal-content {
            background-color: white;
            border-radius: 1rem;
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
            margin: 1rem;
            max-width: 56rem;
            width: 100%;
            max-height: 90vh;
            overflow: hidden;
            display: flex;
            align-items: center;
            flex-direction: column;
            padding-left: 2rem;
        }

        .modal-image-container {
            width: 100%;
            padding: 1rem;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .modal-image-container img {
            border-radius: 0.5rem;
            object-fit: cover;
            max-height: 100%;
        }

        .modal-text-container {
            width: 100%;
            padding: 2rem 2.5rem 2.5rem;
            overflow-y: auto;
            position: relative;
        }

        .modal-close-button {
            position: absolute;
            top: 0.75rem;
            right: 0.75rem;
            color: #6b7280;
            background: transparent;
            border: none;
            cursor: pointer;
            padding: 0.5rem;
            border-radius: 9999px;
            transition: all 0.2s ease-in-out;
        }

        .modal-close-button:hover {
            color: #1f2937;
            background-color: #f3f4f6;
        }

        .modal-close-button svg {
            width: 1.5rem;
            height: 1.5rem;
            display: block;
        }

        #modal-title {
            font-size: 1.5rem;
            font-weight: bold;
            color: #1f2937;
            margin: 0 0 1rem;
        }

        #modal-description {
            color: #4b5563;
            line-height: 1.625;
            margin: 0;
        }


        /* Responsive Styles */
        @media (min-width: 768px) {
            .container {
                padding-left: 1.5rem;
                padding-right: 1.5rem;
            }

            .nav-links {
                display: flex;
            }

            .mobile-menu-button {
                display: none;
            }

            .hero-content h1 {
                font-size: 3.75rem;
            }

            .hero-content p {
                font-size: 1.25rem;
            }

            .grid-2-col {
                grid-template-columns: repeat(2, minmax(0, 1fr));
            }

            .md-text-left {
                text-align: left;
            }

            .grid-3-col {
                grid-template-columns: repeat(2, minmax(0, 1fr));
            }

            .footer-grid {
                grid-template-columns: repeat(2, 1fr);
            }

            .modal-content {
                flex-direction: row;
            }

            .modal-image-container,
            .modal-text-container {
                width: 50%;
            }
        }

        @media (min-width: 1024px) {
            .container {
                padding-left: 2rem;
                padding-right: 2rem;
            }

            .grid-3-col {
                grid-template-columns: repeat(3, minmax(0, 1fr));
            }
        }
    </style>
</head>

<body>
    <!-- Navbar -->
    <nav class="navbar">
        <div class="container navbar-container">
            <a href="#" class="logo">
                <img src="Street_App_Location_Itinerary_Logo_-removebg-preview.png" alt="Sawari Logo">
            </a>
            <div class="nav-links">

                <a href="#trip-planner" class="nav-link">Plan Trip with AI</a>
                <a href="findBus.html" class="nav-link">Find bus</a>
                <a href="#" id="contact-link" class="nav-link">Contact Us</a>
                <a href="#" id="login-nav-link" class="nav-link">Login</a>
                <a href="#" id="logout-nav-link" class="nav-link hidden">Logout</a>
                <a href="track.html" id="track-bus-nav-link" class="cta-button-nav">
                    Track Bus Live
                </a>
            </div>
            <!-- Mobile Menu Button -->
            <button id="mobile-menu-button" class="mobile-menu-button">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                        d="M4 6h16M4 12h16m-7 6h7" />
                </svg>
            </button>
        </div>
        <!-- Mobile Menu -->
        <div id="mobile-menu" class="mobile-menu">
            <a href="#about" class="nav-link">About</a>
            <a href="#features" class="nav-link">Features</a>
            <a href="#trip-planner" class="nav-link">Plan Trip</a>
            <a href="#" id="contact-link-mobile" class="nav-link">Contact Us</a>
            <a href="#" id="login-nav-link-mobile" class="nav-link">Login</a>
            <a href="#" id="logout-nav-link-mobile" class="nav-link hidden">Logout</a>
            <a href="live_tracking.html" id="track-bus-nav-link-mobile" class="cta-button-nav">
                Track Your Bus Live
            </a>
        </div>
    </nav>

    <!-- Hero Section -->
    <header id="home" class="hero-section">
        <div class="hero-background"></div>
        <div class="hero-overlay"></div>
        <div class="container hero-content">
            <h1>Tracking Your Journey in India, Simplified</h1>
            <p>
                FutureSphere, an initiative of the Government of Punjab, provides a reliable and easy-to-use platform
                for tracking public buses across the state in real-time.
            </p>
            <a href="#features" class="hero-button">
                Explore Our Features
            </a>
        </div>
    </header>


    <!-- What We Do Section -->
    <section id="about" class="section bg-white">
        <div class="container">
            <div class="grid-2-col" style="align-items: center;">
                <div style="text-align: center;" class="md-text-left">
                    <h2>Our Commitment to Users</h2>
                    <p class="section-description">
                        Our mission is to modernize public transportation by providing citizens with accurate, real-time
                        information. This platform helps to reduce waiting times, improve journey planning, and enhance
                        overall public transport efficiency and convenience for everyone in the state. See a demo of our
                        route tracking map below.
                    </p>
                </div>
                <div class="map-container">
                    <div id="map"></div>
                </div>
            </div>
        </div>
    </section>

    <!-- Features Section -->
    <section id="features" class="section bg-gray-100">
        <div class="container">
            <div class="text-center">
                <h2>Key Features</h2>
                <p class="section-description centered">Everything you need for a seamless and predictable travel
                    experience.</p>
            </div>
            <div class="grid-3-col">
                <!-- Feature 1 -->
                <div class="feature-card" onclick="showFeatureModal('tracking')">
                    <div class="feature-icon-wrapper bg-blue-100 text-blue-600">
                        <svg fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z">
                            </path>
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"></path>
                        </svg>
                    </div>
                    <h3>Real-time Bus Tracking</h3>
                    <p>
                        See the live location of all government buses on an interactive map. Know exactly where your bus
                        is at any moment.
                    </p>
                </div>
                <!-- Feature 2 -->
                <div class="feature-card" onclick="showFeatureModal('planning')">
                    <div class="feature-icon-wrapper bg-green-100 text-green-600">
                        <svg fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13l6-3m-6 3V7m6 10l5.447 2.724A1 1 0 0021 16.382V5.618a1 1 0 00-1.447-.894L15 7m-6 13v-3m6 3v-3m0-10l-6 3m6-3l6 3">
                            </path>
                        </svg>
                    </div>
                    <h3>Route Planning & Schedules</h3>
                    <p>
                        Find the most efficient bus routes to your destination and view up-to-date bus schedules and
                        timings.
                    </p>
                </div>
                <!-- Feature 3 -->
                <div class="feature-card" onclick="showFeatureModal('notifications')">
                    <div class="feature-icon-wrapper bg-red-100 text-red-600">
                        <svg fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9">
                            </path>
                        </svg>
                    </div>
                    <h3>Arrival Notifications</h3>
                    <p>
                        Set up custom alerts to receive notifications for your bus's estimated time of arrival at your
                        desired bus stop.
                    </p>
                </div>
                <!-- Feature 4 (New) -->
                <div class="feature-card" onclick="showFeatureModal('tripPlanner')">
                    <div class="feature-icon-wrapper bg-purple-100 text-purple-600">
                        <svg fill="none" stroke="currentColor" viewBox="0 0 24 24"
                            xmlns="http://www.w3.org/2000/svg">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z">
                            </path>
                        </svg>
                    </div>
                    <h3>AI Trip Planner</h3>
                    <p>
                        Get intelligent, AI-powered route suggestions for your journey. Find the most efficient way to
                        travel across Punjab.
                    </p>
                </div>
                <!-- Feature 5 (Coming Soon) -->
                <div class="feature-card">
                    <div class="feature-icon-wrapper bg-gray-200 text-gray-800">
                        <svg fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>
                    </div>
                    <h3>Coming Soon</h3>
                    <p>
                        We're always working on new features to improve your travel experience. Stay tuned for updates!
                    </p>
                </div>
            </div>
        </div>
    </section>

    <!-- CTA Section -->
    <section id="track-bus" class="section bg-white">
        <div class="container" style="text-align: center;">
            <h2>Track Your Bus Live</h2>
            <p class="section-description centered">
                Never miss your bus again. Our real-time tracking feature gives you up-to-the-minute updates on your
                bus's location, so you can plan your journey with confidence.
            </p>
            <a href="track.html" id="track-bus-main-link" class="cta-button-main">
                Go to Live Map
            </a>
        </div>
    </section>

    <!-- AI Trip Planner Section -->
    <section id="trip-planner" class="section bg-white">
        <div class="container text-center">
            <h2 style="text-align: center;">✨ Plan My Trip with AI</h2>
            <p class="section-description centered" style="text-align: center;">
                Let our AI assistant help you find the best bus route for your journey within India. Just enter your
                start and end points below.
            </p>
            <div class="form-container" style="margin-top: 2rem;">
                <div class="contact-form" style="gap: 1rem; box-shadow: 0 10px 15px -3px rgba(0,0,0,0.05);">
                    <input type="text" id="start-point" placeholder="Enter Starting Point">
                    <input type="text" id="end-point" placeholder="Enter Destination">
                    <button id="generate-plan-btn" class="cta-button-main" style="margin-top: 0;">Generate Plan
                        ✨</button>
                </div>
                <div id="loading-indicator" class="hidden" style="margin-top: 2rem;">
                    <p>Generating your trip plan... ✨</p>
                </div>
                <div id="trip-plan-result" class="trip-plan-container hidden"
                    style="margin-top: 2rem; background-color: white; padding: 2rem; border-radius: 1rem; box-shadow: 0 10px 15px -3px rgba(0,0,0,0.1); text-align: left;">
                    <!-- Generated plan will appear here -->
                </div>
            </div>
        </div>
    </section>

    <!-- Contact Us Section -->
    <section id="contact" class="section bg-gray-100 hidden">
        <div class="container">
            <div class="text-center">
                <h2>Contact Us</h2>
                <p class="section-description centered">
                    Have a question or need assistance? Our support team is here to help. Send us a message and we'll
                    get back to you as soon as possible.
                </p>
            </div>
            <div class="form-container">
                <form class="contact-form">
                    <div>
                        <label for="name">Name</label>
                        <input type="text" id="name" name="name" required>
                    </div>
                    <div>
                        <label for="email">Email</label>
                        <input type="email" id="email" name="email" required>
                    </div>
                    <div>
                        <label for="message">Message</label>
                        <textarea id="message" name="message" rows="4" required></textarea>
                    </div>
                    <button type="submit">Send Message</button>
                </form>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="footer-grid">
                <!-- Column 1: About -->
                <div class="footer-column">
                    <a href="#" class="logo">
                        <img src="Street_App_Location_Itinerary_Logo_-removebg-preview.png" alt="Sawari Logo">
                    </a>
                    <p class="footer-about">
                        Modernizing public transport across India with real-time bus tracking, AI-powered journey
                        planning, and a commitment to seamless travel.
                    </p>
                </div>
                <!-- Column 2: Quick Links -->
                <div class="footer-column">
                    <h4>Quick Links</h4>
                    <ul>
                        <li><a href="#about">About Us</a></li>
                        <li><a href="#features">Features</a></li>
                        <li><a href="#trip-planner">AI Planner</a></li>
                        <li><a href="#" id="contact-link-footer" onclick="handleContactClick(event)">Contact</a></li>
                    </ul>
                </div>
                <!-- Column 3: Legal -->
                <div class="footer-column">
                    <h4>Legal</h4>
                    <ul>
                        <li><a href="#" onclick="showPrivacyModal(event)">Privacy Policy</a></li>
                        <li><a href="#" onclick="showTncModal(event)">Terms of Service</a></li>
                    </ul>
                </div>
                <!-- Column 4: Social -->
                <div class="footer-column">
                    <h4>Follow Us</h4>
                    <div class="social-links">
                        <a href="#" aria-label="Facebook">
                            <svg fill="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                                <path
                                    d="M22 12c0-5.523-4.477-10-10-10S2 6.477 2 12c0 4.991 3.657 9.128 8.438 9.878v-6.987h-2.54V12h2.54V9.797c0-2.506 1.492-3.89 3.777-3.89 1.094 0 2.238.195 2.238.195v2.46h-1.26c-1.243 0-1.63.771-1.63 1.562V12h2.773l-.443 2.891h-2.33V21.88A9.952 9.952 0 0022 12z">
                                </path>
                            </svg>
                        </a>
                        <a href="#" aria-label="X">
                            <svg fill="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                                <path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"></path>
                            </svg>
                        </a>
                        <a href="#" aria-label="Instagram">
                            <svg fill="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                                <path
                                    d="M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.85s-.012 3.584-.07 4.85c-.148 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07s-3.584-.012-4.85-.07c-3.252-.148-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.85s.012-3.584.07-4.85c.148-3.227 1.664-4.771 4.919-4.919C8.416 2.175 8.796 2.163 12 2.163zm0 1.802c-3.116 0-3.483.011-4.69.068-2.61.12-3.832 1.341-3.952 3.952-.057 1.207-.068 1.574-.068 4.69s.011 3.483.068 4.69c.12 2.611 1.342 3.833 3.952 3.952 1.207.057 1.574.068 4.69.068s3.483-.011 4.69-.068c2.61-.12 3.832-1.341 3.952-3.952.057-1.207.068-1.574.068-4.69s-.011-3.483-.068-4.69c-.12-2.611-1.342-3.833-3.952-3.952-1.207-.057-1.574-.068-4.69-.068zm0 3.39c-2.485 0-4.488 2.003-4.488 4.488s2.003 4.488 4.488 4.488 4.488-2.003 4.488-4.488S14.485 7.355 12 7.355zm0 7.178c-1.487 0-2.69-1.203-2.69-2.69s1.203-2.69 2.69-2.69 2.69 1.203 2.69 2.69-1.203 2.69-2.69 2.69zm6.415-7.58c-.53 0-.96.43-.96.96s.43.96.96.96.96-.43.96-.96-.43-.96-.96-.96z">
                                </path>
                            </svg>
                        </a>
                    </div>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2025 Sawari. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <!-- Feature Modal -->
    <div id="feature-modal" class="modal-overlay hidden">
        <div class="modal-content">
            <div class="modal-image-container">
                <img id="modal-image" src="" alt="Feature image">
            </div>
            <div class="modal-text-container">
                <button class="modal-close-button" onclick="closeModal()">
                    <svg fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M6 18L18 6M6 6l12 12"></path>
                    </svg>
                </button>
                <h3 id="modal-title"></h3>
                <p id="modal-description"></p>
            </div>
        </div>
    </div>

    <!-- Privacy Policy Modal -->
    <div id="privacy-modal" class="modal-overlay hidden">
        <div class="modal-content" style="flex-direction: column; max-width: 48rem;">
            <div class="modal-text-container" style="width: 100%;">
                <button class="modal-close-button" onclick="closePrivacyModal()">
                    <svg fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M6 18L18 6M6 6l12 12"></path>
                    </svg>
                </button>
                <h3>Privacy Policy</h3>
                <p style="color: #4b5563; line-height: 1.625; margin-top: 1rem;">
                    <strong>Last Updated: September 7, 2025</strong><br><br>
                    Your privacy is important to us. It is Sawari's policy to respect your privacy regarding any
                    information we may collect from you across our website, and other sites we own and operate.<br><br>
                    We only ask for personal information when we truly need it to provide a service to you. We collect
                    it by fair and lawful means, with your knowledge and consent. We also let you know why we’re
                    collecting it and how it will be used.<br><br>
                    We only retain collected information for as long as necessary to provide you with your requested
                    service. What data we store, we’ll protect within commercially acceptable means to prevent loss and
                    theft, as well as unauthorized access, disclosure, copying, use or modification.<br><br>
                    We don’t share any personally identifying information publicly or with third-parties, except when
                    required to by law.
                </p>
            </div>
        </div>
    </div>

    <!-- Terms of Service Modal -->
    <div id="tnc-modal" class="modal-overlay hidden">
        <div class="modal-content" style="flex-direction: column; max-width: 48rem;">
            <div class="modal-text-container" style="width: 100%;">
                <button class="modal-close-button" onclick="closeTncModal()">
                    <svg fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M6 18L18 6M6 6l12 12"></path>
                    </svg>
                </button>
                <h3>Terms of Service</h3>
                <p style="color: #4b5563; line-height: 1.625; margin-top: 1rem;">
                    <strong>1. Terms</strong><br>
                    By accessing the website at Sawari, you are agreeing to be bound by these terms of service, all
                    applicable laws and regulations, and agree that you are responsible for compliance with any
                    applicable local laws.<br><br>
                    <strong>2. Use License</strong><br>
                    Permission is granted to temporarily download one copy of the materials (information or software) on
                    Sawari's website for personal, non-commercial transitory viewing only. This is the grant of a
                    license, not a transfer of title.<br><br>
                    <strong>3. Disclaimer</strong><br>
                    The materials on Sawari's website are provided on an 'as is' basis. Sawari makes no warranties,
                    expressed or implied, and hereby disclaims and negates all other warranties including, without
                    limitation, implied warranties or conditions of merchantability, fitness for a particular purpose,
                    or non-infringement of intellectual property or other violation of rights.
                </p>
            </div>
        </div>
    </div>

    <!-- Main Login Modal -->
    <div id="login-overlay" class="modal-overlay hidden">
        <div class="modal-content" style="flex-direction: column; max-width: 26rem;">
            <div class="modal-text-container" style="width: 100%; text-align: center; padding: 2rem 2.5rem 2.5rem 2rem;">
                <button class="modal-close-button" onclick="loginOverlay.classList.add('hidden')">
                    <svg fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>
                </button>
                <a href="#" class="logo" style="justify-content: center; margin-bottom: 0.5rem;">
                    <img src="Street_App_Location_Itinerary_Logo_-removebg-preview.png" alt="Sawari Logo">
                </a>
                <h3 style="margin-top: 1rem;">Welcome Back</h3>
                <p style="color: #4b5563; margin-bottom: 2rem;">Sign in to continue to your account.</p>

                <button class="google-login-btn">
                    <svg viewBox="0 0 48 48" xmlns="http://www.w3.org/2000/svg"><g><path fill="#EA4335" d="M24 9.5c3.54 0 6.71 1.22 9.21 3.6l6.85-6.85C35.9 2.38 30.47 0 24 0 14.62 0 6.51 5.38 2.56 13.22l7.98 6.19C12.43 13.72 17.74 9.5 24 9.5z"></path><path fill="#4285F4" d="M46.98 24.55c0-1.57-.15-3.09-.38-4.55H24v9.02h12.94c-.58 2.96-2.26 5.48-4.78 7.18l7.73 6c4.51-4.18 7.09-10.36 7.09-17.65z"></path><path fill="#FBBC05" d="M10.53 28.59c-.48-1.45-.76-2.99-.76-4.59s.27-3.14.76-4.59l-7.98-6.19C.92 16.46 0 20.12 0 24c0 3.88.92 7.54 2.56 10.78l7.97-6.19z"></path><path fill="#34A853" d="M24 48c6.48 0 11.93-2.13 15.89-5.81l-7.73-6c-2.15 1.45-4.92 2.3-8.16 2.3-6.26 0-11.57-4.22-13.47-9.91l-7.98 6.19C6.51 42.62 14.62 48 24 48z"></path><path fill="none" d="M0 0h48v48H0z"></path></g></svg>
                    <span>Sign in with Google</span>
                </button>

                <div class="divider">OR</div>

                <form id="login-form" style="display: grid; gap: 1rem; text-align: left;">
                    <div>
                        <label for="login-email" class="contact-form label">Email</label>
                        <input type="email" id="login-email" name="email" required class="form-input"
                            value="test@sawari.com">
                    </div>
                    <div>
                        <label for="login-password" class="contact-form label">Password</label>
                        <input type="password" id="login-password" name="password" required class="form-input"
                            value="password123">
                    </div>
                    <button type="submit" class="cta-button-main" style="margin-top: 1rem; width: 100%;">Login with Email</button>
                </form>
                <p style="margin-top: 1.5rem; font-size: 0.875rem;">Don't have an account? <a href="#"
                        style="color: #3b82f6; font-weight: 500;">Sign Up</a></p>
            </div>
        </div>
    </div>

    <!-- "Please Login" Prompt Modal -->
    <div id="please-login-modal" class="modal-overlay hidden">
        <div class="modal-content" style="flex-direction: column; max-width: 28rem;">
            <div class="modal-text-container" style="width: 100%; text-align: center; padding: 2.5rem;">
                <button class="modal-close-button" onclick="closePleaseLoginModal()">
                    <svg fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M6 18L18 6M6 6l12 12"></path>
                    </svg>
                </button>
                <h3 style="margin-top: 1rem;">Login Required</h3>
                <p style="color: #4b5563; margin: 1rem 0 2rem;">You must be logged in to use this feature.</p>
                <button id="go-to-login-btn" class="cta-button-main" style="width: 100%;">Go to Login</button>
            </div>
        </div>
    </div>


    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
        integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" crossorigin=""></script>
    <script>
        document.addEventListener('DOMContentLoaded', function () {

            // --- LOGIN SYSTEM ---
            const loginOverlay = document.getElementById('login-overlay');
            const pleaseLoginModal = document.getElementById('please-login-modal');
            const loginForm = document.getElementById('login-form');
            const goToLoginBtn = document.getElementById('go-to-login-btn');

            // Nav Links
            const loginNavLinks = [document.getElementById('login-nav-link'), document.getElementById('login-nav-link-mobile')];
            const logoutNavLinks = [document.getElementById('logout-nav-link'), document.getElementById('logout-nav-link-mobile')];

            // Feature Access Links/Buttons
            const trackBusLinks = [
                document.getElementById('track-bus-nav-link'),
                document.getElementById('track-bus-nav-link-mobile'),
                document.getElementById('track-bus-main-link')
            ];

            const isLoggedIn = () => localStorage.getItem('isLoggedIn') === 'true';

            function checkLoginState() {
                if (isLoggedIn()) {
                    // --- USER IS LOGGED IN ---
                    loginOverlay.classList.add('hidden');
                    loginNavLinks.forEach(link => link.classList.add('hidden'));
                    logoutNavLinks.forEach(link => link.classList.remove('hidden'));
                } else {
                    // --- USER IS LOGGED OUT ---
                    loginOverlay.classList.remove('hidden');
                    loginNavLinks.forEach(link => link.classList.remove('hidden'));
                    logoutNavLinks.forEach(link => link.classList.add('hidden'));
                }
            }

            function handleLogin(e) {
                e.preventDefault();
                // This is a dummy login. In a real app, you'd validate credentials.
                localStorage.setItem('isLoggedIn', 'true');
                checkLoginState();
            }

            function handleLogout(e) {
                e.preventDefault();
                localStorage.removeItem('isLoggedIn');
                checkLoginState();
            }

            function showPleaseLoginModal() {
                pleaseLoginModal.classList.remove('hidden');
            }

            function closePleaseLoginModal() {
                pleaseLoginModal.classList.add('hidden');
            }

            // Event Listeners
            loginForm.addEventListener('submit', handleLogin);
            logoutNavLinks.forEach(link => link.addEventListener('click', handleLogout));
            loginNavLinks.forEach(link => link.addEventListener('click', (e) => {
                 e.preventDefault();
                 loginOverlay.classList.remove('hidden');
            }));

            goToLoginBtn.addEventListener('click', () => {
                closePleaseLoginModal();
                loginOverlay.classList.remove('hidden');
            });

            pleaseLoginModal.addEventListener('click', (e) => {
                if (e.target.id === 'please-login-modal') {
                    closePleaseLoginModal();
                }
            });


            // Guarding feature access
            trackBusLinks.forEach(link => {
                link.addEventListener('click', function (e) {
                    if (!isLoggedIn()) {
                        e.preventDefault();
                        showPleaseLoginModal();
                    }
                });
            });

            // --- END LOGIN SYSTEM ---


            // Smooth scroll for navigation links
            document.querySelectorAll('a[href^="#"]').forEach(anchor => {
                anchor.addEventListener('click', function (e) {
                    const targetId = this.getAttribute('href');
                    if (targetId === '#' || this.id.includes('contact-link') || this.hasAttribute('onclick')) {
                        return;
                    }
                    const targetElement = document.querySelector(targetId);
                    if (targetElement) {
                        e.preventDefault();
                        targetElement.scrollIntoView({
                            behavior: 'smooth'
                        });
                        const mobileMenu = document.getElementById('mobile-menu');
                        if (mobileMenu.classList.contains('active')) {
                            mobileMenu.classList.remove('active');
                        }
                    }
                });
            });

            // Mobile menu toggle
            const mobileMenuButton = document.getElementById('mobile-menu-button');
            const mobileMenu = document.getElementById('mobile-menu');
            mobileMenuButton.addEventListener('click', () => {
                mobileMenu.classList.toggle('active');
            });

            // Function to handle the "Contact Us" link click
            function handleContactClick(e) {
                if (!isLoggedIn()) {
                    e.preventDefault();
                    showPleaseLoginModal();
                    return;
                }
                e.preventDefault();
                const contactSection = document.getElementById('contact');
                contactSection.classList.remove('hidden');
                contactSection.scrollIntoView({
                    behavior: 'smooth'
                });
                mobileMenu.classList.remove('active');
            }

            document.getElementById('contact-link').addEventListener('click', handleContactClick);
            document.getElementById('contact-link-mobile').addEventListener('click', handleContactClick);
            document.getElementById('contact-link-footer').addEventListener('click', handleContactClick);


            // Initialize the map
            const map = L.map('map').setView([30.7333, 76.7794], 12);

            L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
                maxZoom: 19,
                attribution: '&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>'
            }).addTo(map);

            // Define a sample bus route
            const busRoute = [
                [30.7333, 76.7794], // Chandigarh
                [30.7042, 76.7570], // Sector 44
                [30.6865, 76.7176], // Mohali
                [30.6599, 76.7171]  // Kharar
            ];

            // Add a polyline for the route
            L.polyline(busRoute, {
                color: '#3b82f6',
                weight: 5,
                opacity: 0.8
            }).addTo(map);

            // Custom bus icon
            var busIcon = L.icon({
                iconUrl: 'https://placehold.co/32x32/f03c3c/FFFFFF?text=BUS',
                iconSize: [32, 32],
                iconAnchor: [16, 16],
                popupAnchor: [0, -16]
            });

            // Add markers for bus stops
            busRoute.forEach((coords, index) => {
                let markerText = `Stop ${index + 1}`;
                if (index === 0) markerText = 'Bus Stop: Chandigarh';
                if (index === busRoute.length - 1) markerText = 'Bus Stop: Kharar';

                L.marker(coords)
                    .addTo(map)
                    .bindPopup(markerText)
                    .openPopup();
            });

            // Add a moving bus marker
            const busMarker = L.marker(busRoute[0], { icon: busIcon }).addTo(map);
            let current_index = 0;
            let animation_fraction = 0;

            function animateBus() {
                if (current_index < busRoute.length - 1) {
                    const startPoint = busRoute[current_index];
                    const endPoint = busRoute[current_index + 1];
                    const lat = startPoint[0] + (endPoint[0] - startPoint[0]) * animation_fraction;
                    const lng = startPoint[1] + (endPoint[1] - startPoint[1]) * animation_fraction;
                    busMarker.setLatLng([lat, lng]);
                    animation_fraction += 0.01;
                    if (animation_fraction >= 1) {
                        animation_fraction = 0;
                        current_index++;
                    }
                } else {
                    current_index = 0;
                    busMarker.setLatLng(busRoute[0]);
                }
                requestAnimationFrame(animateBus);
            }

            setTimeout(() => requestAnimationFrame(animateBus), 1000);

            // Global function for modals, now with login check
            window.showFeatureModal = function (feature) {
                if (!isLoggedIn()) {
                    showPleaseLoginModal();
                    return;
                }

                const modal = document.getElementById('feature-modal');
                const modalImage = document.getElementById('modal-image');
                const modalTitle = document.getElementById('modal-title');
                const modalDescription = document.getElementById('modal-description');
                let content = {};
                switch (feature) {
                    case 'tracking':
                        content = {
                            imageURL: 'https://placehold.co/600x400/87CEEB/ffffff?text=Bus+Tracking',
                            title: 'Real-time Bus Tracking',
                            description: 'Our GPS-enabled system allows you to view the live location of every public bus on a detailed map. You can see their exact position, speed, and direction, giving you the power to plan your trip with precision and confidence. Never again will you have to wonder where your bus is. This feature drastically reduces waiting times at bus stops and makes public transport a more reliable option for daily commuters.'
                        };
                        break;
                    case 'planning':
                        content = {
                            imageURL: 'https://placehold.co/600x400/90EE90/ffffff?text=Route+Planning',
                            title: 'Effortless Route Planning',
                            description: 'The platform provides an intelligent route planning tool that helps you find the quickest and most convenient bus routes to your destination. Simply enter your starting point and desired stop, and our system will analyze all available bus schedules and routes to provide you with the best options. This feature is integrated with real-time data to account for delays and help you navigate the city efficiently.'
                        };
                        break;
                    case 'notifications':
                        content = {
                            imageURL: 'https://placehold.co/600x400/F08080/ffffff?text=Notifications',
                            title: 'Customizable Arrival Notifications',
                            description: 'Stay informed without having to constantly check the app. Our notification system allows you to set up alerts for your preferred bus routes and stops. You will receive a push notification or an SMS message a few minutes before your bus is scheduled to arrive, ensuring you are ready to board without any unnecessary waiting. This feature is designed to make your commute more relaxed and stress-free.'
                        };
                        break;
                    case 'tripPlanner':
                        content = {
                            imageURL: 'https://placehold.co/600x400/d8b4fe/ffffff?text=AI+Planner',
                            title: '✨ AI-Powered Trip Planner',
                            description: 'Our newest feature uses advanced AI to help you plan your journey. Simply enter your start and end points, and our smart assistant will generate a detailed bus route for you, including bus numbers, important stops, and estimated travel times. It takes the guesswork out of navigating Punjab\'s public transport system, making your travel smoother and more efficient than ever before.'
                        };
                        break;
                }
                modalImage.src = content.imageURL;
                modalTitle.textContent = content.title;
                modalDescription.textContent = content.description;
                modal.classList.remove('hidden');
            }

            window.closeModal = function () {
                document.getElementById('feature-modal').classList.add('hidden');
            }

            document.getElementById('feature-modal').addEventListener('click', (e) => {
                if (e.target.id === 'feature-modal') {
                    closeModal();
                }
            });

            // Gemini API Trip Planner
            const generatePlanBtn = document.getElementById('generate-plan-btn');
            const startPointInput = document.getElementById('start-point');
            const endPointInput = document.getElementById('end-point');
            const tripPlanResult = document.getElementById('trip-plan-result');
            const loadingIndicator = document.getElementById('loading-indicator');

            async function generateTripPlan() {
                if (!isLoggedIn()) {
                    showPleaseLoginModal();
                    return;
                }

                const startPoint = startPointInput.value;
                const endPoint = endPointInput.value;

                if (!startPoint || !endPoint) {
                    tripPlanResult.classList.remove('hidden');
                    tripPlanResult.textContent = 'Please enter both a starting point and a destination.';
                    return;
                }

                loadingIndicator.classList.remove('hidden');
                tripPlanResult.classList.add('hidden');
                generatePlanBtn.disabled = true;

                const apiKey = "AIzaSyCAKkIr4ec1q9WxtKb3CyZKmE3Nmj6cks";
                const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:generateContent?key=${AIzaSyCAKkIr4ec1q9WxtKb3CyZKmE3Nmj6cks}`;
                const userQuery = `Generate a brief, 4-point public bus trip overview from ${startPoint} to ${endPoint} in India. The overview should only include the most critical boarding and deboarding points. Do not include extra details. The output must be a numbered list with exactly four points.`;

                try {
                    const payload = {
                        contents: [{
                            parts: [{
                                text: userQuery
                            }]
                        }],
                    };
                    const response = await fetch(apiUrl, {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json'
                        },
                        body: JSON.stringify(payload)
                    });
                    if (!response.ok) {
                        throw new Error(`API request failed with status ${response.status}`);
                    }
                    const result = await response.json();
                    const candidate = result.candidates?.[0];
                    if (candidate && candidate.content?.parts?.[0]?.text) {
                        tripPlanResult.textContent = candidate.content.parts[0].text;
                    } else {
                        tripPlanResult.textContent = 'Sorry, I could not generate a trip plan at this time. The model did not provide a valid response.';
                    }
                } catch (error) {
                    console.error('Error generating trip plan:', error);
                    tripPlanResult.textContent = 'An error occurred while generating your trip plan. Please try again later.';
                } finally {
                    loadingIndicator.classList.add('hidden');
                    tripPlanResult.classList.remove('hidden');
                    generatePlanBtn.disabled = false;
                }
            }
            generatePlanBtn.addEventListener('click', generateTripPlan);

            // Privacy and T&C Modals
            const privacyModal = document.getElementById('privacy-modal');
            const tncModal = document.getElementById('tnc-modal');
            window.showPrivacyModal = function (event) {
                event.preventDefault();
                privacyModal.classList.remove('hidden');
            }
            window.closePrivacyModal = function () {
                privacyModal.classList.add('hidden');
            }
            window.showTncModal = function (event) {
                event.preventDefault();
                tncModal.classList.remove('hidden');
            }
            window.closeTncModal = function () {
                tncModal.classList.add('hidden');
            }
            privacyModal.addEventListener('click', (e) => {
                if (e.target.id === 'privacy-modal') {
                    closePrivacyModal();
                }
            });
            tncModal.addEventListener('click', (e) => {
                if (e.target.id === 'tnc-modal') {
                    closeTncModal();
                }
            });

            // Initial check on page load
            checkLoginState();
        });
    </script>
</body>

</html>

